# 启用 URL 重写
RewriteEngine On

# 将所有请求重定向到 index.php，排除 register.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(?!register\.php)(.*)$ /index.php [L]

# 防止访问 .htaccess 文件本身
<Files .htaccess>
    Require all denied
</Files>

# 设置默认首页文件
DirectoryIndex index.php

# 错误文档配置
ErrorDocument 403 https://errors.infinityfree.net/errors/403/
ErrorDocument 404 https://errors.infinityfree.net/errors/404/
ErrorDocument 500 https://errors.infinityfree.net/errors/500/

# 显示 PHP 错误
php_value display_errors On
php_value date.timezone Asia/Macau

# CORS 配置
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
    Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
    Header set Access-Control-Allow-Headers "Content-Type"
</IfModule>
